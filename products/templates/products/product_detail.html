{% extends 'base/base.html' %}
{% load static %}
{% load humanize %}
{% block title %}
{{ product.name }}
{% endblock %}
{% block content %}
<section class="container mt-5 bg-light shadow rounded">
  <div class="row">
    <div class="col-md-6 col-sm-12 col-lg-6 d-flex align-items-center justify-content-center">
      <img id="product-details-image" class="w-sm-100 w-lg-40 w-md-40" src="{{ product.image.url }}" alt="" />
    </div>
    <div class="col-md-6 col-sm-12 col-lg-6 p-sm-1 p-md-3 p-lg-2">
      <div id="details-info" style="font-size: 18px;">
        <div class=" p-3">
          <div class="row">
            <div class="col-12 text-uppercase fw-bold fs-2">
              {{product.name}}
            </div>

          </div>
          <hr />
          <div class="row">
            <div class="col-12 text-capitalize">

              {{product.description}}
            </div>
          </div>
          <hr />
          <div class="row">
            <div class="col-4">
              Categories:
            </div>
            <div class="col-8 text-end">
              {{product.category}}
            </div>
          </div>
          <hr />
          <div class="row">
            <div class="col-6">
              Price(NGN):
            </div>
            <div class="col-6 text-end">
              &#8358;{{product.price|intcomma}}
            </div>
          </div>
          <hr />
          <div class="row">
            <div class="col-6">
              Size:
            </div>
            <div class="col-6 text-end">
              {{product.product_size}}
            </div>
          </div>
          <hr />
          <div class="row">
            <div class="col-6">
              Color:
            </div>
            <div class="col-6 text-end">
              {{product.product_color}}
            </div>
          </div>
          <hr />
          <div class="row align-items-center">
            <div class="col-6">
              Approximate delivery time:
            </div>
            <div class="col-6 text-end">
              {{product.delivery_days}} days
            </div>
          </div>
          <hr />
          {% if product.available_quantity %}
          <p class="text-success">
            Available
          </p>
          <form class="form-group row justify-content-center align-items-center" action="{% url 'add_cart' %}"
            method="get">
            {% csrf_token %}
            <input type="number" hidden value="{{product.id}}" name="product_id" id="product_id">
            <div class="col-12">
              <input type="number" name="quantity" id="quantity" min="1" max="{{product.available_quantity}}" value="1"
                class="input-group rounded" />
            </div>
            <div class="col-12 text-center mt-3">
              <input type="submit" style="background-color: purple; color: white;width: 100%" value="Add to Cart"
                class="btn" />
            </div>
          </form>
          {% else %}
          <p class="text-danger">
            {{product.available_quantity}} available
          </p>
          {% endif %}
        </div>

        <br />
      </div>
    </div>
  </div>
  <script>
    $('#add-quantity').click(function (e) {
      e.preventDefault()
      var quantity = $('#quantity').val()
      $('#quantity').val(quantity + 1)
    })
    $('#subtract-quantity').click(function (e) {
      e.preventDefault()
      var quantity = $('#quantity').val()
      $('#quantity').val(quantity - 1)
    })
  </script>
</section>
{% endblock content %}