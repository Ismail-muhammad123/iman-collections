{% extends 'base/base.html' %}
{% load static %}
{% load humanize %}
{% block title %}
{{ product.name }}
{% endblock %}
{% block content %}
<section class="container mt-5">
  <div class="row">
    <div class="col-md-12 col-sm-12 col-lg-6 p-sm-1 p-md-3 p-lg-2">
      <img id="product-details-image" height="500px" width="100%" src="{{ product.image.url }}" alt="" />
    </div>
    <div class="col-md-12 col-sm-12 col-lg-6 p-sm-1 p-md-3 p-lg-2">
      <div id="details-info" style="font-size: 18px;">
        <h2 class="text-uppercase p-2" style="background-color: pink; font-weight: 700; color: purple;">
          Product Info
        </h2>
        <ul class="list-group">
          <li class="list-group-item">
            <div class="row">
              <div class="col-6 text-uppercase" style="font-weight: 700;">
                Name:
              </div>
              <div class="col-6 text-end text-capitalize">
                {{product.name}}
              </div>
            </div>
          </li>
          <li class="list-group-item">
            <div class="row">
              <div class="col-4">
                Description
              </div>
              <div class="col-8 text-end">
                {{product.description}}
              </div>
            </div>
          </li>
          <li class="list-group-item">
            <div class="row">
              <div class="col-4">
                Categories
              </div>
              <div class="col-8 text-end">
                {{product.category}}
              </div>
            </div>
          </li>
          <li class="list-group-item">
            <div class="row">
              <div class="col-6">
                Price(NGN):
              </div>
              <div class="col-6 text-end">
                {{product.price|intcomma}}
              </div>
            </div>
          </li>

          <li class="list-group-item">
            <div class="row">
              <div class="col-6">
                Size:
              </div>
              <div class="col-6 text-end">
                {{product.product_size}}
              </div>
            </div>
          </li>
          <li class="list-group-item">
            <div class="row">
              <div class="col-6">
                Color:
              </div>
              <div class="col-6 text-end">
                {{product.product_color}}
              </div>
            </div>
          </li>

          <li class="list-group-item">
            <div class="row">
              <div class="col-6">
                Delivery in:
              </div>
              <div class="col-6 text-end">
                {{product.delivery_days}} days
              </div>
            </div>
          </li>

          <li class="list-group-item">

            {% if product.available_quantity %}
            <p class="text-success">
              Available
            </p>
            <form class="form-group row justify-content-center align-items-center" action="{% url 'add_cart' %}"
              method="post">
              {% csrf_token %}
              <input type="number" hidden value="{{product.id}}" name="product_id" id="id">
              <div class="col-12">
                <input type="number" name="quantity" id="quantity" min="1" max="{{product.available_quantity}}"
                  value="1" class="input-group rounded" />
              </div>
              <div class="col-12 text-center mt-3">
                <input type="submit" style="background-color: purple; color: white;width: 100%" value="Add to Cart"
                  class="btn" />
              </div>
            </form>
            {% else %}
            <p class="text-danger">
              {{product.available_quantity}} available
            </p>
            {% endif %}
          </li>
        </ul>

        <br />
      </div>
    </div>
  </div>
  <script>
    $('#add-quantity').click(function (e) {
      e.preventDefault()
      var quantity = $('#quantity').val()
      $('#quantity').val(quantity + 1)
    })
    $('#subtract-quantity').click(function (e) {
      e.preventDefault()
      var quantity = $('#quantity').val()
      $('#quantity').val(quantity - 1)
    })
  </script>
</section>
{% endblock content %}